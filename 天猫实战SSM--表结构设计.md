#天猫实战SSM--表结构设计

在需求分析结束之后，接下来要做的不是马上开发功能，而是进行表结构的设计。 
只有把表结构设计正确了，才能支撑软件后续的功能开发，这一步是非常重要的。 
为了便于理解表结构设计的过程，把设计过程分解成了 

    1. 数据库的创建 
    2. 表与表关系 
    3. 建表SQL语句 
    4. 表与页面 



# 1 数据库的创建

创建数据库:tmall_ssm3
并且将数据库的编码设置为utf8，便于存放中文

```
drop database if exists tmall_ssm3;
create database tmall_ssm3 default character set utf8;
```


# 2 表与表的关系

![表格.jpg](https://i.loli.net/2018/09/15/5b9cdb96da3d0.jpg)




| 表名 |  中文含义  |    介绍   | 
| ----- | ----- | ----- |
| Category| 分类表  | 存放分类信息，如女装，平板电视，沙发等 |
| Property | 属性表  |存放属性信息，如颜色，重量，品牌，厂商，型号等|
| PropertyValue | 属性值表   |存放属性值信息，如重量是900g,颜色是粉红色|
| Product| 3.7M |存放产品信息，如LED40EC平板电视机，海尔EC6005热水器|
| ProductImage | 3.7M |存放产品图片信息，如产品页显示的5个图片|
| Review | 3.7M |存放评论信息，如买回来的蜡烛很好用，么么哒|
| User | 3.7M |存放用户信息，如斩手狗，千手小粉红|
| Order | 3.7M |存放订单信息，包括邮寄地址，电话号码等信息|
| OrderItem | 3.7M |存放订单项信息，包括购买产品种类，数量等|


# 3 正确的分析表与表之间的关系的方法


表与表之间的关系，基本上是3种
**一对一**
**一对多**
**多对一**
那么怎么判断关系到底是什么呢？
以分类和产品为例子，分类表里有多条数据，产品表里也有多条数据，那么他们的关系是多对多吗？ 从经验上讲，我们知道这个结果是不正确的。

正确的分析表与表之间的关系的方法是这样：
**一个**分类对应 **多个** 产品
**一个**产品对应 **一个** 分类

所以分类和产品之间的关系是**一对多**


# 4 表关系

从最上面的表关系图中可以看到，有关系的表之间，都是一对多关系(反过来就是多对一关系)，并没有一对一关系，和多对多关系。

所以本表列出了所有的一对多关系

注：产品和用户之间其实是多对多关系，即一个用户可以购买多种产品，一种产品可以被多个用户购买。 但是他们的多对多关系是间接的建立在订单项表(OrderItem)上的。


| 1 | 多 |
| ----- | ----- |
|Category-分类 |Product-产品  |
|Category-分类 |Property-属性  |
|Property-属性 |PropertyValue-属性值  |
|Product-产品  |PropertyValue-属性值  |
|Product-产品  | ProductImage-产品图片 |
|Product-产品  | ProductImage-产品图片 |
|Product-产品  | Review-评价 |
|User-用户  | Order-订单 |
|Product-产品  | OrderItem-订单项 |
|User-用户  | OrderItem-订单项 |
|Order-订单	  |OrderItem-订单项 |
|User-用户  | Review-评价 |
